{"version":3,"file":"websocket.test.js","sourceRoot":"","sources":["../../src/websocket/websocket.test.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iBAAe;AACf,oCAA+C;AAE/C,kDAA4B;AAE5B,gBAAM,CAAC,MAAM,EAAE,CAAC;AAEhB,IAAM,UAAU,GAAG,CAAC,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;AAE9D,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,UAAU,CAAC,CAAC;AAEtC,IAAM,SAAS,GAAG,IAAI,UAAS,CAAC,UAAU,CAAC,CAAC;AAE5C,MAAM,CAAC,UAAC,IAAI;IACV,SAAS,CAAC,EAAE,CAAC,kBAAe,CAAC,OAAO,EAAE;;YACpC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAC3B,IAAI,EAAE,CAAC;;;SACR,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,QAAQ,CAAC,WAAW,EAAE;IACpB,EAAE,CAAC,mBAAmB,EAAE,UAAC,IAAI;QAC3B,IAAI,SAAS,GAAG,KAAK,CAAC;QACtB,SAAS,CAAC,EAAE,CAAC,QAAQ,EAAE,UAAO,IAAc;;gBAC1C,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;gBAC/B,IAAI,CAAC,SAAS,EAAE;oBACd,IAAI,EAAE,CAAC;iBACR;gBACD,SAAS,GAAG,IAAI,CAAC;;;aAClB,CAAC,CAAC;QAEH,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IAC9B,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,qCAAqC,EAAE,UAAC,IAAI;QAC7C,SAAS,CAAC,EAAE,CAAC,QAAQ,EAAE,UAAO,IAAc;;gBAC1C,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;;;aAChC,CAAC,CAAC;QAEH,SAAS,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAE/B,UAAU,CAAC;YACT,IAAI,EAAE,CAAC;QACT,CAAC,EAAE,KAAK,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import \"mocha\";\nimport FinnhubWS, { FinnhubWSEvents } from \".\";\n\nimport dotenv from \"dotenv\";\nimport { TickData } from \"../interface\";\ndotenv.config();\n\nconst finnHubKey = (process && process.env.FINNHUB_KEY) || \"\";\n\nconsole.log(\"finnHubKey\", finnHubKey);\n\nconst finnhubWs = new FinnhubWS(finnHubKey);\n\nbefore((done) => {\n  finnhubWs.on(FinnhubWSEvents.onReady, async () => {\n    console.log(\"WS is ready\");\n    done();\n  });\n});\n\ndescribe(\"FinnhubWS\", () => {\n  it(\"should get onData\", (done) => {\n    let completed = false;\n    finnhubWs.on(\"onData\", async (data: TickData) => {\n      console.log(\"WS onData\", data);\n      if (!completed) {\n        done();\n      }\n      completed = true;\n    });\n\n    finnhubWs.addSymbol(\"AAPL\");\n  });\n\n  it(\"should stop getting data get onData\", (done) => {\n    finnhubWs.on(\"onData\", async (data: TickData) => {\n      console.log(\"WS onData\", data);\n    });\n\n    finnhubWs.removeSymbol(\"AAPL\");\n\n    setTimeout(() => {\n      done();\n    }, 10000);\n  });\n});\n"]}