{"version":3,"file":"stockEstimates.js","sourceRoot":"","sources":["../../src/api/stockEstimates.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA;;;;GAIG;AACU,QAAA,uBAAuB,GAAG,UACrC,IAAuB;;;;;gBAEf,KAA6B,IAAI,OAAlB,EAAf,MAAM,mBAAG,MAAM,KAAA,EAAE,OAAO,GAAK,IAAI,QAAT,CAAU;gBAEpC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;gBAGtB,MAAM,GAAG;oBACb,MAAM,QAAA;oBACN,KAAK,OAAA;iBACN,CAAC;;;;gBAGwB,qBAAM,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,sBAAsB,EAAE;wBACpE,MAAM,EAAE,KAAK;wBACb,MAAM,QAAA;qBACP,CAAC,EAAA;;gBAHI,eAAe,GAAG,SAGtB;gBAEI,oBAAoB,GAA2B,eAAe,CAAC,IAAI,CAAC;gBAC1E,sBAAO,oBAAoB,EAAC;;;gBAE5B,OAAO,CAAC,GAAG,CAAC,qCAAqC,EAAE,OAAK,IAAI,OAAK,CAAC,OAAO,CAAC,CAAC;gBAC3E,sBAAO;wBACL;4BACE,MAAM,QAAA;4BACN,GAAG,EAAE,CAAC;4BACN,IAAI,EAAE,CAAC;4BACP,MAAM,EAAE,IAAI,IAAI,EAAE;4BAClB,IAAI,EAAE,CAAC;4BACP,SAAS,EAAE,CAAC;4BACZ,UAAU,EAAE,CAAC;yBACd;qBACF,EAAC;;;;KAEL,CAAC","sourcesContent":["import FinnhubAPI from \".\";\nimport { RecommendationTrends } from \"../interface\";\n\ninterface GetRecommendation {\n  symbol: string;\n  context: FinnhubAPI;\n}\n\n/**\n * Get Recommendation Trends\n * https://finnhub.io/docs/api/recommendation-trends\n * @param args\n */\nexport const GetRecommendationTrends = async (\n  args: GetRecommendation,\n): Promise<RecommendationTrends[]> => {\n  const { symbol = \"AAPL\", context } = args;\n\n  const token = context.token;\n\n  // https://finnhub.io/api/v1/stock/recommendation?symbol=AAPL&token=\n  const params = {\n    symbol,\n    token,\n  };\n\n  try {\n    const recommendations = await context.api.get(`stock/recommendation`, {\n      method: \"GET\",\n      params,\n    });\n\n    const recommendationTrends: RecommendationTrends[] = recommendations.data;\n    return recommendationTrends;\n  } catch (error) {\n    console.log(\"error getting recommendation trends\", error && error.message);\n    return [\n      {\n        symbol,\n        buy: 0,\n        hold: 0,\n        period: new Date(),\n        sell: 0,\n        strongBuy: 0,\n        strongSell: 0,\n      },\n    ];\n  }\n};\n"]}