{"version":3,"file":"quote.js","sourceRoot":"","sources":["../../src/api/quote.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA;;;;GAIG;AACU,QAAA,YAAY,GAAG,UAAO,IAAc;;;;;gBACvC,KAA6B,IAAI,OAAlB,EAAf,MAAM,mBAAG,MAAM,KAAA,EAAE,OAAO,GAAK,IAAI,QAAT,CAAU;gBAEpC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;gBAGtB,MAAM,GAAG;oBACb,MAAM,QAAA;oBACN,KAAK,OAAA;iBACN,CAAC;;;;gBAGc,qBAAM,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE;wBAC3C,MAAM,EAAE,KAAK;wBACb,MAAM,QAAA;qBACP,CAAC,EAAA;;gBAHI,KAAK,GAAG,SAGZ;gBAEI,KAOa,KAAK,CAAC,IAAI,EAN3B,cAAQ,EACL,IAAI,OAAA,EACJ,GAAG,OAAA,EACN,aAAO,EACH,SAAS,QAAA,EACV,IAAI,OAAA,CACqB;gBAE9B,sBAAO;wBACL,MAAM,QAAA;wBACN,KAAK,SAAA;wBACL,IAAI,MAAA;wBACJ,GAAG,KAAA;wBACH,IAAI,QAAA;wBACJ,SAAS,WAAA;wBACT,IAAI,EAAE,IAAI,IAAI,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC;qBAC7B,EAAC;;;gBAEF,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAE,OAAK,IAAI,OAAK,CAAC,OAAO,CAAC,CAAC;gBAC3D,sBAAO;wBACL,MAAM,QAAA;wBACN,KAAK,EAAE,CAAC;wBACR,IAAI,EAAE,CAAC;wBACP,GAAG,EAAE,CAAC;wBACN,IAAI,EAAE,CAAC;wBACP,SAAS,EAAE,CAAC;wBACZ,IAAI,EAAE,IAAI,IAAI,EAAE;qBACjB,EAAC;;;;KAEL,CAAC","sourcesContent":["import FinnhubAPI from \".\";\nimport { Quote, QuoteResponse } from \"../interface\";\n\ninterface GetQuote {\n  symbol: string;\n  context: FinnhubAPI;\n}\n\n/**\n * Get quote\n * https://finnhub.io/docs/api#quote\n * @param args\n */\nexport const getQuoteData = async (args: GetQuote): Promise<Quote> => {\n  const { symbol = \"AAPL\", context } = args;\n\n  const token = context.token;\n\n  // https://finnhub.io/api/v1/quote?symbol=AAPL&token=\n  const params = {\n    symbol,\n    token,\n  };\n\n  try {\n    const ticks = await context.api.get(`quote`, {\n      method: \"GET\",\n      params,\n    });\n\n    const {\n      c: close,\n      h: high,\n      l: low,\n      o: open,\n      pc: prevClose,\n      t: time,\n    }: QuoteResponse = ticks.data;\n\n    return {\n      symbol,\n      close,\n      high,\n      low,\n      open,\n      prevClose,\n      date: new Date(+time * 1000),\n    };\n  } catch (error) {\n    console.log(\"error getting quote\", error && error.message);\n    return {\n      symbol,\n      close: 0,\n      high: 0,\n      low: 0,\n      open: 0,\n      prevClose: 0,\n      date: new Date(),\n    };\n  }\n};\n"]}